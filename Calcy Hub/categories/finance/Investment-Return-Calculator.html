<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Investment Return Calculator üìä - Calculate Investment Growth</title>
    <meta
      name="description"
      content="Modern Neumorphic Investment Return Calculator with charts, compound interest, and detailed breakdown. Calculate investment returns, CAGR, and future value instantly."
    />
    <meta
      name="keywords"
      content="Investment Calculator, Return Calculator, CAGR Calculator, Compound Interest, Investment Growth, ROI Calculator, Future Value, Financial Planning"
    />
    <meta name="author" content="Calcy Hub" />
    <script
      defer
      src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.9.1/chart.min.js"
    ></script>
    <style>
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      :root {
        --primary-bg: #e0e5ec;
      }

      body {
        font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
        background: #e0e5ec;
        color: #333;
        padding: 8px;
        min-height: 100vh;
      }

      .container {
        max-width: 1200px;
        margin: 0 auto;
      }

      /* Top Bar */
      .header {
        background: var(--primary-bg);
        padding: 8px 10px;
        border: 1px solid #9aa3af;
        border-radius: 10px;
        box-shadow: 0px 0px 16px #a3b1c6, -9px -9px 16px #ffffff;
        display: flex;
        align-items: center;
        gap: 20px;
        margin-bottom: 15px;
        flex-wrap: nowrap;
        position: sticky;
      }

      .back-btn {
        background: var(--primary-bg);
        border: 1px solid #9aa3af;
        padding: 12px 20px;
        border-radius: 12px;
        box-shadow: 4px 4px 8px #a3b1c6, -4px -4px 8px #ffffff;
        cursor: pointer;
        color: #555;
        font-size: 14px;
        transition: all 0.3s;
      }

      .back-btn:hover {
        box-shadow: inset 3px 3px 7px #a3b1c6, inset -3px -3px 7px #ffffff;
      }

      .back-btn:active {
        box-shadow: inset 5px 5px 10px #a3b1c6, inset -5px -5px 10px #ffffff;
      }

      .header-center {
        flex: 1;
        text-align: center;
      }

      .header-center h1 {
        font-size: 28px;
      }

      .header-actions {
        display: flex;
        gap: 10px;
      }

      .icon-btn {
        background: var(--primary-bg);
        border: 1px solid #9aa3af;
        width: 40px;
        height: 40px;
        border-radius: 10px;
        box-shadow: 4px 4px 8px #a3b1c6, -4px -4px 8px #ffffff;
        cursor: pointer;
        font-size: 18px;
        transition: all 0.3s;
        border: none;
      }

      .icon-btn:active {
        box-shadow: inset 4px 4px 8px #a3b1c6, inset -4px -4px 8px #ffffff;
      }

      /* Main Content */
      .main-content {
        display: grid;
        grid-template-columns: 1fr;
        gap: 30px;
      }

      /* Card Style */
      .card {
        background: var(--primary-bg);
        padding: 20px;
        border-radius: 20px;
        border: 1px solid #89929d;
        box-shadow: 0px 0px 16px #a3b1c6, -9px -9px 16px #ffffff;
      }

      .card h2 {
        font-size: 22px;
        margin-bottom: 15px;
        color: #2c502e;
      }

      /* Input Groups */
      .input-group {
        margin-bottom: 15px;
      }

      .input-group label {
        display: block;
        margin-bottom: 10px;
        font-weight: 600;
        color: #555;
        font-size: 14px;
      }

      input[type="number"],
      select {
        width: 100%;
        padding: 10px 20px;
        border: none;
        border-radius: 12px;
        border: 1px solid #9aa3af;
        background: var(--primary-bg);
        box-shadow: inset 0px 0px 8px #a3b1c6, inset -4px -4px 8px #ffffff;
        font-size: 16px;
        color: #333;
        transition: all 0.3s;
      }

      input[type="number"]:focus,
      select:focus {
        outline: none;
        box-shadow: inset 6px 6px 12px #a3b1c6, inset -6px -6px 12px #ffffff;
      }

      /* Toggle Switch */
      .toggle-group {
        display: flex;
        gap: 10px;
        flex-wrap: wrap;
      }

      .toggle-btn {
        flex: 1;
        min-width: 100px;
        padding: 10px 20px;
        border: none;
        border-radius: 12px;
        border: 1px solid #9aa3afdf;
        background: var(--primary-bg);
        box-shadow: 0px 0px 10px #a3b1c6, -5px -5px 10px #ffffff;
        cursor: pointer;
        font-size: 14px;
        color: #555;
        transition: all 0.3s;
      }

      .toggle-btn.active {
        box-shadow: inset 4px 4px 8px #a3b1c6, inset -4px -4px 8px #ffffff;
        color: #3498db;
        font-weight: 600;
        animation: pulse 3s infinite;
      }

      @keyframes pulse {
        0% {
          transform: scale(1);
          box-shadow: 0 1px 4px rgba(80, 99, 103, 0.3);
        }
        50% {
          transform: scale(1.02);
          box-shadow: 0 2px 6px rgba(93, 98, 99, 0.4);
        }
        100% {
          transform: scale(1);
          box-shadow: 0 1px 4px rgba(85, 92, 93, 0.3);
        }
      }

      /* Buttons */
      .btn-group {
        display: flex;
        gap: 15px;
        margin-top: 30px;
        flex-wrap: wrap;
      }

      .calculate-btn {
        flex: 2;
        min-width: 200px;
        padding: 15px 40px;
        border: none;
        border-radius: 15px;
        background: linear-gradient(145deg, #27ae60, #229954);
        color: var(--primary-bg);
        font-size: 18px;
        font-weight: 600;
        cursor: pointer;
        box-shadow: 6px 6px 12px #a3b1c6, -6px -6px 12px #ffffff;
        transition: all 0.3s;
      }

      .calculate-btn:hover {
        transform: translateY(-2px);
        box-shadow: 8px 8px 16px #a3b1c6, -8px -8px 16px #ffffff;
      }

      .calculate-btn:active {
        transform: translateY(0);
        box-shadow: inset 2px 2px 8px #1e8449, inset -4px -4px 8px #52be80;
      }

      .reset-btn {
        flex: 1;
        min-width: 120px;
        padding: 18px 30px;
        border: none;
        border-radius: 15px;
        background: var(--primary-bg);
        color: #555;
        font-size: 16px;
        font-weight: 600;
        cursor: pointer;
        box-shadow: 5px 5px 10px #a3b1c6, -5px -5px 10px #ffffff;
        transition: all 0.3s;
      }

      .reset-btn:hover {
        box-shadow: 3px 3px 6px #a3b1c6, -3px -3px 6px #ffffff;
      }

      .reset-btn:active {
        box-shadow: inset 3px 3px 6px #a3b1c6, inset -3px -3px 6px #ffffff;
      }

      /* Results */
      .results-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
        gap: 20px;
        margin-bottom: 30px;
      }

      .result-item {
        background: var(--primary-bg);
        padding: 20px;
        border-radius: 15px;
        box-shadow: inset 4px 4px 8px #a3b1c6, inset -4px -4px 8px #ffffff;
        text-align: center;
      }

      .result-label {
        font-size: 13px;
        color: #777;
        margin-bottom: 8px;
        text-transform: uppercase;
        letter-spacing: 0.5px;
      }

      .result-value {
        font-size: 26px;
        font-weight: 700;
        color: #2c3e50;
      }

      /* Charts */
      .charts-container {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
        gap: 25px;
        margin-bottom: 30px;
      }

      .chart-wrapper {
        background: var(--primary-bg);
        padding: 25px;
        border-radius: 15px;
        box-shadow: 9px 9px 16px #a3b1c6, -9px -9px 16px #ffffff;
      }

      .chart-wrapper h3 {
        margin-bottom: 20px;
        color: #2c3e50;
        font-size: 18px;
      }

      /* Action Buttons */
      .action-buttons {
        display: flex;
        gap: 15px;
        flex-wrap: wrap;
        margin-bottom: 30px;
      }

      .action-btn {
        padding: 14px 28px;
        border: none;
        border-radius: 12px;
        background: var(--primary-bg);
        color: #555;
        font-size: 15px;
        font-weight: 600;
        cursor: pointer;
        box-shadow: 5px 5px 10px #a3b1c6, -5px -5px 10px #ffffff;
        transition: all 0.3s;
        display: flex;
        align-items: center;
        gap: 8px;
      }

      .action-btn:hover {
        box-shadow: 3px 3px 6px #a3b1c6, -3px -3px 6px #ffffff;
      }

      .action-btn:active {
        box-shadow: inset 3px 3px 6px #a3b1c6, inset -3px -3px 6px #ffffff;
      }

      /* Info Cards */
      .info-cards {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
        gap: 25px;
        margin-top: 30px;
      }

      .info-card {
        background: var(--primary-bg);
        padding: 25px;
        border-radius: 15px;
        border: 1px solid #9aa3af;
        box-shadow: 0px 0px 16px #a3b1c6, -9px -9px 16px #ffffff;
      }

      .info-card h3 {
        color: #2c3e50;
        margin-bottom: 15px;
        font-size: 18px;
      }

      .info-card p,
      .info-card ul {
        color: #555;
        line-height: 1.8;
        font-size: 14px;
      }

      .info-card ul {
        list-style: none;
        padding-left: 0;
      }

      .info-card li {
        padding-left: 25px;
        position: relative;
        margin-bottom: 10px;
      }

      .info-card li:before {
        content: "‚Ä¢";
        position: absolute;
        left: 10px;
        color: #27ae60;
        font-weight: bold;
      }

      /* Hidden Sections */
      .hidden {
        display: none;
      }

      .cards {
        background: var(--primary-bg);
        padding: 20px;
        margin-top: 30px;
        border-radius: 20px;
        border: 1px solid #89929d;
        box-shadow: 0px 0px 16px #a3b1c6, -9px -9px 16px #ffffff;
      }

      .cards h2 {
        font-size: 22px;
        margin-bottom: 15px;
        color: #2c502e;
      }

      .comparison-section {
        margin-top: 30px;
        padding: 25px;
        background: var(--primary-bg);
        border-radius: 15px;
        box-shadow: inset 4px 4px 8px #a3b1c6, inset -4px -4px 8px #ffffff;
      }

      .comparison-table {
        margin-top: 15px;
        border-collapse: collapse;
        width: 100%;
        background: #f5f7fa;
        border-radius: 10px;
        overflow: hidden;
        box-shadow: 0px 0px 8px #a3b1c6, -4px -4px 8px #ffffff;
      }

      .comparison-table th {
        background: #e0e5ec;
        text-align: left;
        padding: 12px 14px;
        color: #27ae60;
        font-size: 15px;
        font-weight: 600;
        border-bottom: 1px solid #d1d9e6;
      }

      .comparison-table td {
        padding: 12px 14px;
        font-size: 15px;
        color: #333;
        border-bottom: 1px solid #e0e5ec;
      }

      .comparison-table tr:last-child td {
        border-bottom: none;
      }

      .formula {
        background: #f5f7fa;
        padding: 15px;
        border-radius: 10px;
        margin: 15px 0;
        font-family: "Courier New", monospace;
        overflow-x: auto;
      }

      /* Quick Tips Table */
      .quick-tips-table {
        margin-top: 8px;
        border-collapse: collapse;
        width: 100%;
        background: #f5f7fa;
        border-radius: 10px;
        overflow: hidden;
        box-shadow: 0px 0px 8px #a3b1c6, -4px -4px 8px #ffffff;
      }

      .quick-tips-table th {
        background: #e0e5ec;
        text-align: left;
        padding: 10px 14px;
        color: #27ae60;
        font-size: 15px;
        font-weight: 600;
        border-bottom: 1px solid #d1d9e6;
      }

      .quick-tips-table th:nth-child(2) {
        color: #2980b9;
      }

      .quick-tips-table th:nth-child(3) {
        color: #2c502e;
      }

      .quick-tips-table td {
        padding: 10px 14px;
        font-size: 15px;
        color: #333;
        border-bottom: 1px solid #e0e5ec;
      }

      .quick-tips-table tr:last-child td {
        border-bottom: none;
      }

      /* Responsive */
      @media (max-width: 480px) {
        .back-btn {
          display: none;
        }

        .icon-btn {
          width: 28px;
          height: 28px;
          font-size: 12px;
          border: 1px solid #9aa3af;
        }
      }

      @media (max-width: 768px) {
        .header h1 {
          font-size: 17px;
          margin-bottom: 3px;
        }

        .card {
          padding: 20px;
        }

        .btn-group {
          flex-direction: column;
        }

        .calculate-btn,
        .reset-btn {
          width: 100%;
        }

        .results-grid {
          grid-template-columns: 1fr;
        }

        .charts-container {
          grid-template-columns: 1fr;
        }
      }

      @media (min-width: 768px) {
        .main-content {
          grid-template-columns: 1fr 1fr;
        }

        .card.full-width {
          grid-column: 1 / -1;
        }
      }
    </style>
  </head>
  <body>
    <div class="container">
      <!-- Top Bar -->
      <div class="header">
        <button class="back-btn" onclick="window.location.href='../../home.html'">
          <span>‚Üê</span> Go Back
        </button>
        <div class="header-center">
          <h1>Investment Return Calcy</h1>
        </div>
        <div class="header-actions">
          <button class="icon-btn" title="Share">üì§</button>
          <button class="icon-btn" title="Download PDF">üìÑ</button>
          <button class="icon-btn" title="Toggle Theme">üåì</button>
        </div>
      </div>

      <div class="main-content">
        <!-- Input Section -->
        <div class="card">
          <h2>Investment Details</h2>

          <div class="input-group">
            <label>Investment Type</label>
            <div class="toggle-group">
              <button
                class="toggle-btn active"
                id="typeLumpsum"
                onclick="setInvestmentType('lumpsum')"
              >
                Lumpsum
              </button>
              <button
                class="toggle-btn"
                id="typeRecurring"
                onclick="setInvestmentType('recurring')"
              >
                Recurring
              </button>
            </div>
          </div>

          <div class="input-group">
            <label for="initialInvestment" id="initialLabel"
              >Initial Investment Amount</label
            >
            <input
              type="number"
              id="initialInvestment"
              value="100000"
              min="1000"
              step="1000"
            />
          </div>

          <div class="input-group hidden" id="recurringGroup">
            <label for="recurringAmount">Monthly Contribution</label>
            <input
              type="number"
              id="recurringAmount"
              value="5000"
              min="100"
              step="500"
            />
          </div>

          <div class="input-group">
            <label for="returnRate">Expected Annual Return Rate (%)</label>
            <input
              type="number"
              id="returnRate"
              value="12"
              min="0.1"
              max="50"
              step="0.5"
            />
          </div>

          <div class="input-group">
            <label for="timePeriod">Investment Period (Years)</label>
            <input
              type="number"
              id="timePeriod"
              value="10"
              min="1"
              max="50"
              step="1"
            />
          </div>

          <div class="input-group">
            <label>Compounding Frequency</label>
            <select id="compoundFrequency">
              <option value="1">Annually</option>
              <option value="2">Semi-Annually</option>
              <option value="4">Quarterly</option>
              <option value="12" selected>Monthly</option>
              <option value="365">Daily</option>
            </select>
          </div>

          <div class="input-group">
            <label for="inflationRate">Inflation Rate (% per year)</label>
            <input
              type="number"
              id="inflationRate"
              value="6"
              min="0"
              max="20"
              step="0.5"
            />
          </div>

          <div class="input-group">
            <label for="currency">Currency</label>
            <select id="currency">
              <option value="‚Çπ">INR (‚Çπ)</option>
              <option value="$">USD ($)</option>
              <option value="‚Ç¨">EUR (‚Ç¨)</option>
              <option value="¬£">GBP (¬£)</option>
            </select>
          </div>

          <div class="btn-group">
            <button class="calculate-btn" onclick="calculateReturns()">
              Calculate Returns
            </button>
            <button class="reset-btn" onclick="resetForm()">Reset</button>
          </div>
        </div>

        <!-- Quick Info -->
        <div class="card" id="quickTipsCard">
          <h2>Quick Tips</h2>
          <div style="color: #555; line-height: 1.8">
            <p style="margin-bottom: 15px">
              üìä <strong>Compound Interest</strong> is the 8th wonder of the
              world - Einstein
            </p>
            <p style="margin-bottom: 15px">
              üí° Time in the market beats timing the market
            </p>
            <p style="margin-bottom: 15px">
              üìà Historical equity returns average 10-15% annually
            </p>
            <p style="margin-bottom: 15px">
              üéØ Start early to leverage the power of compounding
            </p>
          </div>
        </div>
      </div>

      <!-- Results Section -->
      <div class="cards full-width hidden" id="resultsSection">
        <h2>Investment Summary</h2>

        <div class="results-grid">
          <div class="result-item">
            <div class="result-label">Total Investment</div>
            <div class="result-value" id="totalInvested">-</div>
          </div>
          <div class="result-item">
            <div class="result-label">Future Value</div>
            <div class="result-value" id="futureValue">-</div>
          </div>
          <div class="result-item">
            <div class="result-label">Total Returns</div>
            <div class="result-value" id="totalReturns">-</div>
          </div>
          <div class="result-item">
            <div class="result-label">CAGR</div>
            <div class="result-value" id="cagrValue">-</div>
          </div>
          <div class="result-item">
            <div class="result-label">Real Value (Inflation Adjusted)</div>
            <div class="result-value" id="realValue" style="font-size: 20px">
              -
            </div>
          </div>
          <div class="result-item">
            <div class="result-label">ROI</div>
            <div class="result-value" id="roiValue">-</div>
          </div>
        </div>

        <!-- Charts -->
        <div class="charts-container">
          <div class="chart-wrapper">
            <h3>Investment vs Returns</h3>
            <canvas id="pieChart"></canvas>
          </div>
          <div class="chart-wrapper">
            <h3>Growth Over Time</h3>
            <canvas id="lineChart"></canvas>
          </div>
        </div>

        <!-- Action Buttons -->
        <div class="action-buttons">
          <button class="action-btn">üìÑ Download PDF</button>
          <button class="action-btn" onclick="toggleComparison()">
            üìä Compare Returns
          </button>
          <button class="action-btn" onclick="toggleFormula()">
            üßÆ Show Formula
          </button>
        </div>

        <!-- Comparison Section -->
        <div class="comparison-section hidden" id="comparisonSection">
          <h3>Return Rate Comparison</h3>
          <table class="comparison-table">
            <thead>
              <tr>
                <th>Return Rate</th>
                <th>Future Value</th>
                <th>Total Returns</th>
              </tr>
            </thead>
            <tbody id="comparisonTable"></tbody>
          </table>
        </div>

        <!-- Formula Section -->
        <div class="comparison-section hidden" id="formulaSection">
          <h3>Calculation Formula</h3>
          <div class="formula" id="formulaContent">
            <strong>Compound Interest Formula:</strong><br />
            FV = P √ó (1 + r/n)^(n√ót)<br /><br />
            Where:<br />
            P = Principal amount<br />
            r = Annual interest rate (as decimal)<br />
            n = Number of times compounded per year<br />
            t = Time in years<br />
            FV = Future Value
          </div>
          <div
            id="calculationExample"
            style="margin-top: 15px; color: #555; line-height: 1.8"
          ></div>
        </div>
      </div>

      <!-- Info Cards -->
      <div class="info-cards">
        <div class="info-card">
          <h3>How to Use This Calculator</h3>
          <ul>
            <li>Choose between lumpsum or recurring investment</li>
            <li>Enter your initial investment amount</li>
            <li>For recurring, add monthly contribution amount</li>
            <li>
              Input expected annual return rate (typically 10-15% for equity)
            </li>
            <li>Select investment period in years</li>
            <li>
              Choose compounding frequency (more frequent = higher returns)
            </li>
            <li>Add inflation rate to see real purchasing power</li>
            <li>Click "Calculate Returns" to see projections</li>
          </ul>
        </div>

        <div class="info-card">
          <h3>Understanding Compound Interest</h3>
          <p>
            Compound interest is interest calculated on the initial principal
            and accumulated interest from previous periods. It's the reason why
            investments grow exponentially over time.
          </p>
          <p style="margin-top: 15px">
            <strong>Example:</strong> ‚Çπ1,00,000 invested at 12% annual return
            compounded monthly for 10 years grows to ‚Çπ3,30,039 - earning
            ‚Çπ2,30,039 in returns (230% gain)!
          </p>
          <p style="margin-top: 15px">
            The more frequently interest is compounded, the faster your money
            grows. Monthly compounding yields better returns than annual
            compounding at the same rate.
          </p>
        </div>

        <div class="info-card">
          <h3>What is CAGR?</h3>
          <p>
            CAGR (Compound Annual Growth Rate) represents the mean annual growth
            rate over a specified time period longer than one year. It's one of
            the most accurate ways to calculate returns.
          </p>
          <p style="margin-top: 15px">
            <strong>Formula:</strong> CAGR = [(Ending Value / Beginning
            Value)^(1/Years)] - 1
          </p>
          <p style="margin-top: 15px">
            CAGR smooths out volatility and gives you a clear picture of your
            investment's performance over time, making it easier to compare
            different investments.
          </p>
        </div>

        <div class="info-card">
          <h3>Investment Tips</h3>
          <ul>
            <li>
              Start investing as early as possible - time is your biggest asset
            </li>
            <li>Diversify across different asset classes to reduce risk</li>
            <li>
              Stay invested for long term (5+ years) to ride out volatility
            </li>
            <li>Don't try to time the market - consistency wins</li>
            <li>Reinvest dividends and interest for faster compounding</li>
            <li>Review and rebalance portfolio annually</li>
            <li>Consider inflation when planning future goals</li>
            <li>Never invest borrowed money in risky assets</li>
          </ul>
        </div>
      </div>
    </div>

    <script>
      let investmentType = "lumpsum";
      let pieChart, lineChart;

      // UI: Toggle investment type
      function setInvestmentType(type) {
        investmentType = type;
        document
          .getElementById("typeLumpsum")
          .classList.toggle("active", type === "lumpsum");
        document
          .getElementById("typeRecurring")
          .classList.toggle("active", type === "recurring");
        document
          .getElementById("recurringGroup")
          .classList.toggle("hidden", type !== "recurring");
        document.getElementById("initialLabel").textContent =
          type === "lumpsum"
            ? "Initial Investment Amount"
            : "Initial Investment (First Month)";
      }

      // Main calculation
      function calculateReturns() {
        // Get inputs
        const P =
          parseFloat(document.getElementById("initialInvestment").value) || 0;
        const recurring =
          parseFloat(document.getElementById("recurringAmount").value) || 0;
        const r = parseFloat(document.getElementById("returnRate").value) / 100;
        const t = parseFloat(document.getElementById("timePeriod").value);
        const n = parseInt(document.getElementById("compoundFrequency").value);
        const inflation =
          parseFloat(document.getElementById("inflationRate").value) / 100;
        const currency = document.getElementById("currency").value;

        let totalInvested = 0,
          futureValue = 0,
          totalReturns = 0,
          cagr = 0,
          roi = 0,
          realValue = 0;
        let yearlyValues = [];

        if (investmentType === "lumpsum") {
          totalInvested = P;
          futureValue = P * Math.pow(1 + r / n, n * t);
          totalReturns = futureValue - totalInvested;
          cagr = Math.pow(futureValue / totalInvested, 1 / t) - 1;
          roi = (totalReturns / totalInvested) * 100;
          realValue = futureValue / Math.pow(1 + inflation, t);

          // Yearly growth for chart
          for (let year = 0; year <= t; year++) {
            yearlyValues.push(P * Math.pow(1 + r / n, n * year));
          }
        } else {
          // Recurring investment (SIP)
          totalInvested = P + recurring * 12 * t;
          // FV = P*(1+r/n)^(n*t) + PMT*[( (1+r/n)^(n*t) - 1 ) / (r/n) ]
          futureValue =
            P * Math.pow(1 + r / n, n * t) +
            recurring *
              ((Math.pow(1 + r / n, n * t) - 1) / (r / n)) *
              (1 + r / n);
          totalReturns = futureValue - totalInvested;
          // CAGR: use weighted average for recurring
          cagr = Math.pow(futureValue / totalInvested, 1 / t) - 1;
          roi = (totalReturns / totalInvested) * 100;
          realValue = futureValue / Math.pow(1 + inflation, t);

          // Yearly growth for chart
          for (let year = 0; year <= t; year++) {
            let fvYear =
              P * Math.pow(1 + r / n, n * year) +
              recurring *
                ((Math.pow(1 + r / n, n * year) - 1) / (r / n)) *
                (1 + r / n);
            yearlyValues.push(fvYear);
          }
        }

        // Update results
        document.getElementById("resultsSection").classList.remove("hidden");
        document.getElementById("totalInvested").textContent =
          currency + " " + formatNumber(totalInvested);
        document.getElementById("futureValue").textContent =
          currency + " " + formatNumber(futureValue);
        document.getElementById("totalReturns").textContent =
          currency + " " + formatNumber(totalReturns);
        document.getElementById("cagrValue").textContent =
          (cagr * 100).toFixed(2) + "%";
        document.getElementById("roiValue").textContent = roi.toFixed(2) + "%";
        document.getElementById("realValue").textContent =
          currency + " " + formatNumber(realValue);

        // Draw charts
        drawPieChart(totalInvested, totalReturns, currency);
        drawLineChart(yearlyValues, currency);

        // Fill formula example
        fillFormulaExample(P, recurring, r, t, n, futureValue, currency);

        // Fill comparison table
        fillComparisonTable(P, recurring, t, n, currency);
      }

      // Format numbers with commas
      function formatNumber(num) {
        return num.toLocaleString(undefined, { maximumFractionDigits: 2 });
      }

      // Pie chart: Investment vs Returns
      function drawPieChart(invested, returns, currency) {
        const ctx = document.getElementById("pieChart").getContext("2d");
        if (pieChart) pieChart.destroy();
        pieChart = new Chart(ctx, {
          type: "pie",
          data: {
            labels: ["Invested", "Returns"],
            datasets: [
              {
                data: [invested, returns],
                backgroundColor: ["#27ae60", "#2980b9"],
              },
            ],
          },
          options: {
            plugins: {
              legend: { position: "bottom" },
            },
          },
        });
      }

      // Line chart: Growth over time
      function drawLineChart(values, currency) {
        const ctx = document.getElementById("lineChart").getContext("2d");
        if (lineChart) lineChart.destroy();
        lineChart = new Chart(ctx, {
          type: "line",
          data: {
            labels: values.map((_, i) => "Year " + i),
            datasets: [
              {
                label: "Value",
                data: values,
                borderColor: "#27ae60",
                backgroundColor: "rgba(39,174,96,0.1)",
                fill: true,
                pointRadius: 3,
              },
            ],
          },
          options: {
            plugins: {
              legend: { display: false },
            },
            scales: {
              y: { beginAtZero: true },
            },
          },
        });
      }

      // Formula example
      function fillFormulaExample(P, recurring, r, t, n, FV, currency) {
        let example = "";
        if (investmentType === "lumpsum") {
          example = `FV = ${currency} ${formatNumber(P)} √ó (1 + ${(
            r / n
          ).toFixed(4)})^(${n * t})<br>
    FV = ${currency} ${formatNumber(FV)}`;
        } else {
          example = `FV = ${currency} ${formatNumber(P)} √ó (1 + ${(
            r / n
          ).toFixed(4)})^(${n * t}) + ${currency} ${formatNumber(
            recurring
          )} √ó [((1 + ${(r / n).toFixed(4)})^(${n * t}) - 1) / ${(
            r / n
          ).toFixed(4)}] √ó (1 + ${(r / n).toFixed(4)})<br>
    FV = ${currency} ${formatNumber(FV)}`;
        }
        document.getElementById("calculationExample").innerHTML = example;
      }

      // Comparison table for different return rates
      function fillComparisonTable(P, recurring, t, n, currency) {
        const rates = [6, 8, 10, 12, 15, 18, 20];
        let html = "";
        rates.forEach((rate) => {
          let r = rate / 100;
          let fv = 0,
            invested = 0;
          if (investmentType === "lumpsum") {
            invested = P;
            fv = P * Math.pow(1 + r / n, n * t);
          } else {
            invested = P + recurring * 12 * t;
            fv =
              P * Math.pow(1 + r / n, n * t) +
              recurring *
                ((Math.pow(1 + r / n, n * t) - 1) / (r / n)) *
                (1 + r / n);
          }
          html += `<tr>
      <td>${rate}%</td>
      <td>${currency} ${formatNumber(fv)}</td>
      <td>${currency} ${formatNumber(fv - invested)}</td>
    </tr>`;
        });
        document.getElementById("comparisonTable").innerHTML = html;
      }

      // Toggle comparison section
      function toggleComparison() {
        document.getElementById("comparisonSection").classList.toggle("hidden");
      }

      // Toggle formula section
      function toggleFormula() {
        document.getElementById("formulaSection").classList.toggle("hidden");
      }

      // Reset form
      function resetForm() {
        document.getElementById("initialInvestment").value = 100000;
        document.getElementById("recurringAmount").value = 5000;
        document.getElementById("returnRate").value = 12;
        document.getElementById("timePeriod").value = 10;
        document.getElementById("compoundFrequency").value = 12;
        document.getElementById("inflationRate").value = 6;
        document.getElementById("currency").value = "‚Çπ";
        setInvestmentType("lumpsum");
        document.getElementById("resultsSection").classList.add("hidden");
        document.getElementById("comparisonSection").classList.add("hidden");
        document.getElementById("formulaSection").classList.add("hidden");
        if (pieChart) pieChart.destroy();
        if (lineChart) lineChart.destroy();
      }

      // Initialize default type
      setInvestmentType("lumpsum");
    </script>
  </body>
</html>
